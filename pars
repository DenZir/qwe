import requests  
from bs4 import BeautifulSoup  
import re  

# URL веб-сайта, с которого вы хотите извлечь ссылки на видео  
url = 'https://rule34.xyz/playlists/view/30404'  

# Заголовки для запроса  
headers = {  
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'  
}  

# Загрузка веб-страницы  
response = requests.get(url, headers=headers)  
response.raise_for_status()  # Проверяет, была ли страница загружена успешно  

# Парсинг HTML-кода страницы  
soup = BeautifulSoup(response.text, 'html.parser')  

# Список для хранения найденных ссылок на видео  
video_links = []  

# Поиск всех ссылок на видео (например, <video> теги и ссылки в <a> тегах)  
for link in soup.find_all('a', href=True):  
    href = link['href']  
    # Проверка, соответствует ли ссылка формату видео  
    if re.search(r'\.(mp4|avi|mov|wmv|mkv)$', href):  
        video_links.append(href)  

# Например, если видеопотоки хранятся в <video> тегах  
for video in soup.find_all('video'):  
    source = video.find('source')  
    if source and 'src' in source.attrs:  
        video_links.append(source['src'])  

# Вывод всех найденных видео ссылок  
for i, video_link in enumerate(video_links, start=1):  
    print(f"{i}. {video_link}")
